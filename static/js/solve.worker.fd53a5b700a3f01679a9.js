!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/meScheduler/",r(r.s=3)}([function(e,t,r){"use strict";e.exports=r(1)},function(e,t,r){"use strict";var n=r(2),o="function"===typeof Symbol&&Symbol.for,i=o?Symbol.for("react.element"):60103,a=o?Symbol.for("react.portal"):60106,u=o?Symbol.for("react.fragment"):60107,c=o?Symbol.for("react.strict_mode"):60108,l=o?Symbol.for("react.profiler"):60114,s=o?Symbol.for("react.provider"):60109,f=o?Symbol.for("react.context"):60110,h=o?Symbol.for("react.forward_ref"):60112,p=o?Symbol.for("react.suspense"):60113,v=o?Symbol.for("react.memo"):60115,d=o?Symbol.for("react.lazy"):60116,y="function"===typeof Symbol&&Symbol.iterator;function m(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function P(e,t,r){this.props=e,this.context=t,this.refs=b,this.updater=r||g}function w(){}function T(e,t,r){this.props=e,this.context=t,this.refs=b,this.updater=r||g}P.prototype.isReactComponent={},P.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(m(85));this.updater.enqueueSetState(this,e,t,"setState")},P.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=P.prototype;var k=T.prototype=new w;k.constructor=T,n(k,P.prototype),k.isPureReactComponent=!0;var C={current:null},A=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var n,o={},a=null,u=null;if(null!=t)for(n in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(a=""+t.key),t)A.call(t,n)&&!S.hasOwnProperty(n)&&(o[n]=t[n]);var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){for(var l=Array(c),s=0;s<c;s++)l[s]=arguments[s+2];o.children=l}if(e&&e.defaultProps)for(n in c=e.defaultProps)void 0===o[n]&&(o[n]=c[n]);return{$$typeof:i,type:e,key:a,ref:u,props:o,_owner:C.current}}function O(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g,j=[];function R(e,t,r,n){if(j.length){var o=j.pop();return o.result=e,o.keyPrefix=t,o.func=r,o.context=n,o.count=0,o}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function N(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>j.length&&j.push(e)}function x(e,t,r){return null==e?0:function e(t,r,n,o){var u=typeof t;"undefined"!==u&&"boolean"!==u||(t=null);var c=!1;if(null===t)c=!0;else switch(u){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case i:case a:c=!0}}if(c)return n(o,t,""===r?"."+q(t,0):r),1;if(c=0,r=""===r?".":r+":",Array.isArray(t))for(var l=0;l<t.length;l++){var s=r+q(u=t[l],l);c+=e(u,s,n,o)}else if(s=null===t||"object"!==typeof t?null:"function"===typeof(s=y&&t[y]||t["@@iterator"])?s:null,"function"===typeof s)for(t=s.call(t),l=0;!(u=t.next()).done;)c+=e(u=u.value,s=r+q(u,l++),n,o);else if("object"===u)throw n=""+t,Error(m(31,"[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return c}(e,"",t,r)}function q(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function $(e,t){e.func.call(e.context,t,e.count++)}function L(e,t,r){var n=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?I(e,n,r,function(e){return e}):null!=e&&(O(e)&&(e=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(E,"$&/")+"/")+r)),n.push(e))}function I(e,t,r,n,o){var i="";null!=r&&(i=(""+r).replace(E,"$&/")+"/"),x(e,L,t=R(t,i,n,o)),N(t)}var M={current:null};function U(){var e=M.current;if(null===e)throw Error(m(321));return e}var F={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:C,IsSomeRendererActing:{current:!1},assign:n};t.Children={map:function(e,t,r){if(null==e)return e;var n=[];return I(e,n,null,t,r),n},forEach:function(e,t,r){if(null==e)return e;x(e,$,t=R(null,null,t,r)),N(t)},count:function(e){return x(e,function(){return null},null)},toArray:function(e){var t=[];return I(e,t,null,function(e){return e}),t},only:function(e){if(!O(e))throw Error(m(143));return e}},t.Component=P,t.Fragment=u,t.Profiler=l,t.PureComponent=T,t.StrictMode=c,t.Suspense=p,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error(m(267,e));var o=n({},e.props),a=e.key,u=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,c=C.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(s in t)A.call(t,s)&&!S.hasOwnProperty(s)&&(o[s]=void 0===t[s]&&void 0!==l?l[s]:t[s])}var s=arguments.length-2;if(1===s)o.children=r;else if(1<s){l=Array(s);for(var f=0;f<s;f++)l[f]=arguments[f+2];o.children=l}return{$$typeof:i,type:e.type,key:a,ref:u,props:o,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:h,render:e}},t.isValidElement=O,t.lazy=function(e){return{$$typeof:d,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:v,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return U().useCallback(e,t)},t.useContext=function(e,t){return U().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return U().useEffect(e,t)},t.useImperativeHandle=function(e,t,r){return U().useImperativeHandle(e,t,r)},t.useLayoutEffect=function(e,t){return U().useLayoutEffect(e,t)},t.useMemo=function(e,t){return U().useMemo(e,t)},t.useReducer=function(e,t,r){return U().useReducer(e,t,r)},t.useRef=function(e){return U().useRef(e)},t.useState=function(e){return U().useState(e)},t.version="16.14.0"},function(e,t,r){"use strict";var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(o){return!1}}()?Object.assign:function(e,t){for(var r,a,u=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var l in r=Object(arguments[c]))o.call(r,l)&&(u[l]=r[l]);if(n){a=n(r);for(var s=0;s<a.length;s++)i.call(r,a[s])&&(u[a[s]]=r[a[s]])}}return u}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){o=!0,i=c}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}r.r(t);r(0);var o="",i="*";function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){u(e,t,r[t])})}return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}var h=function(e,t){return e[0]===t[0]&&e[1]===t[1]},p=function(e,t){for(var r=0;r<e.length;r++)if(h(e[r],t))return!0;return!1},v=function(e,t){return e.filter(function(e){return!h(t,e)})},d=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,n=0;n<t;n++)for(var o=0;o<r;o++)e(n,o)},y=function(e){var t=Object();return t.Pos=[],t.Pos.push(e.Pos[0]),t.Pos.push(e.Pos[1]),t.m=e.m,t.teacher=e.teacher,t},m=function(e,t,r){try{return r.allClasses[t].teachers[e].remPeriods>0?"shift":"cycle"}catch(n){throw alert("week.allClasses[".concat(t,"].teachers[").concat(e,"] is undefined")),"undefined teacher"}};var g,b={copyInstructions:function(e){var t=[];return e.forEach(function(e){t.push(y(e))}),t},copyInstruction:y,pickAction:m,situation:function(e,t,r,o){var i=n(t,2),a=i[0],u=i[1],c=o.allClasses[r].l[a][u].currentTeacher,l=m(e,r,o),s=o.teacherSchedule[e][a][u];if(null!==s)return{currTeacher:c,action:l,r:s};throw{teacher:e,Pos:t,m:r,week:o,message:"Trying to get the situation for an imposible case of teacher not in the school in the first case his schedule reads null! "}},situationInt:function(e){var t=e.currTeacher,r=e.action,n=e.r;return t===o?"shift"===r?-1===n?1:2:-1===n?3:4:"shift"===r?-1===n?5:6:-1===n?7:8},ruffleShuffle:function(e,t){(t>e.length||t<0)&&alert("Fuck!! went wrong. ruffleShuffle returned empty list");for(var r=[],n=0;n<t;n++)for(var o=t;o<e.length;o++)r.push(e[n].concat(e[o]));return r},stepMatch:function(e,t){if(void 0===t)return!1;var r=t.teacher===i,n=h(t.Pos,[-1,-1]);return(e.Pos===t.Pos||n)&&(e.teacher===t.teacher||r)&&e.m===t.m},getHisActPeriods:function(e,t){var r=[];return d(function(n,o){e.l[n][o].currentTeacher===t&&r.push([n,o])}),r},removed:function(e,t){return e.slice(0,e.indexOf(t)).concat(e.slice(e.indexOf(t)+1))}},P=function(){function e(){l(this,e),this._store=[]}return f(e,[{key:"Empty",value:function(){return 0===this._store.length}},{key:"length",value:function(){return this._store.length}},{key:"notEmpty",value:function(){return!this.Empty()}},{key:"enqueue",value:function(e){this._store.push(e)}},{key:"dequeue",value:function(){this._store.shift()}},{key:"front",value:function(){return this._store[0]}}]),e}(),w=function(){function e(){l(this,e),this.queue=new P,this._max=1e5,this._accepting=!0}return f(e,[{key:"Empty",value:function(){return this.queue.Empty()}},{key:"notEmpty",value:function(){return!this.Empty()}},{key:"enqueue",value:function(e){return this._accepting&&this.queue.length()<this._max?(this.queue.enqueue(e),!0):(this._accepting=!1,!1)}},{key:"dequeue",value:function(){this.queue.dequeue()}},{key:"unlock",value:function(){this._accepting||(this._accepting=!0)}},{key:"length",value:function(){return this.queue.length()}},{key:"eraseAll",value:function(){for(;this.notEmpty();)this.dequeue()}},{key:"callFront",value:function(e,t,r){var n=this.queue.front();if("pre"===n.callTo)t(n);else if("re"===n.callTo){if(void 0===n.Action)throw c({},n,{message:"Action not specified for re call"});e(n)}else if("pivotTo"===n.callTo){if(void 0===n.pivotArgs)throw c({},n,{message:"callTo pivotTo with missing pivotArgs"});r(n)}else if("nothing"===n.callTo)if(0!==n.Pivots.length)S(n);else{var o=O(n);n.week.activateList.push(b.copyInstructions(o))}}}]),e}();!function(e){e[e.ETA=0]="ETA",e[e.TABLE=1]="TABLE",e[e.DATAPARSER=2]="DATAPARSER"}(g||(g={}));function T(){if(1===arguments.length){var e,t=arguments.length<=0?void 0:arguments[0];if(t.week.allClasses[t.m].l[t.Pos[0]][t.Pos[1]].isCemented)return!0;for(var r=0;r<t.Pivots.length;r++){if(h(t.Pivots[r].Pos,t.Pos)&&t.Pivots[r].m===t.m)return!0;if(t.Pivots[r].teacher===t.teacher&&h(t.Pivots[r].Pos,t.Pos))return!0}if(void 0===t.parent)throw c({},t,{message:"Parent is undefined!",where:"in conflicts"});for(e=t.parent;null!==e;){if(h(e.Pos,t.Pos)&&e.m===t.m)return!0;if(e.teacher===t.teacher&&h(e.Pos,t.Pos))return!0;if(void 0===e.parent)throw c({},e,{message:"Parent is undefined!",where:"in conflicts"});e=e.parent}return!1}if(2===arguments.length){for(var n=arguments.length<=0?void 0:arguments[0],o=arguments.length<=1?void 0:arguments[1],i=0;i<n.length;i++){if(h(n[i].Pos,o.Pos)&&n[i].m===o.m)return!0;if(n[i].teacher===o.teacher&&h(n[i].Pos,o.Pos))return!0}return!1}}var k=5,C=new w;function A(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&e.activateList.length,e.activateList.length>k}function S(e){var t=c({},e.Pivots[e.Pivots.length-1],{parent:e,Pivots:a(e.Pivots)});t.Pivots.pop(),C.enqueue(t)}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(11).fill(!1);if(void 0===e.pivotArgs)throw c({},e,{message:"call to pivotTo with missing pivotArgs"});if(!T(e)){var r=e.pivotArgs.next_m;if(t[r]||t[e.m])return void console.warn("circular calls breaker used");t[r]=!0,t[e.m]=!0;var o=e.pivotArgs.AfterReChainNode,i=n(e.Pos,2),u=i[0],l=i[1],s=e.pivotArgs.beforeReChainNode,f=null===e.pivotArgs.beforeReChainNode?a(e.Pivots):a(e.pivotArgs.beforeReChainNode.Pivots);void 0!==o&&f.push(o);var h=e.week.allClasses[r].l[u][l].Options,p=h.filter(function(t){if(t===e.week.allClasses[r].l[u][l].currentTeacher)return!1;var n=b.situation(t,e.Pos,r,e.week);return-1===n.r||t===e.week.allClasses[e.m].l[u][l].currentTeacher&&n.r===e.m?(C.enqueue({callTo:"re",parent:s,teacher:t,Pos:e.Pos,m:r,week:e.week,cycleClosingParentName:t,Action:n.action,Pivots:a(f)}),!1):n.r!==e.m});if(h.length-p.length>=3)return;p.forEach(function(n){var o=b.situation(n,e.Pos,r,e.week);_(c({},e,{Pivots:a(f),callTo:"pivotTo",pivotArgs:{next_m:o.r,AfterReChainNode:{callTo:"re",parent:void 0,teacher:n,Pos:e.Pos,m:r,week:e.week,cycleClosingParentName:n,Action:o.action,Pivots:a(f)},beforeReChainNode:s}}),t)})}}function O(e){for(var t=e,r=[];null!==t;){if(r.push({teacher:t.teacher,Pos:t.Pos,m:t.m}),void 0===t.parent)throw c({},t,{message:"parent undefined"});t=t.parent}return r}function E(e){var t=e.teacher,r=e.m,o=e.week,i=o.activateList;if(!T(e)){var u=o.allClasses[r].teachers[t].periodsHere||b.getHisActPeriods(o.allClasses[r],t),l=C.length(),s=new w;if(u.forEach(function(u){var l=n(u,2),f=l[0],p=l[1];o.allClasses[r].l[f][p].Options.forEach(function(n){if(n!==t){var l={teacher:n,Pos:u,m:r,week:o,callTo:"nothing",parent:e,Pivots:a(e.Pivots)};if(!function(e){var t;if(e.week.allClasses[e.m].l[e.Pos[0]][e.Pos[1]].isCemented)return!0;if(void 0===e.parent)throw c({},e,{message:"Parent is undefined"});for(t=e.parent;null!==t;){if(h(t.Pos,e.Pos)&&t.m===e.m)return!0;if(t.teacher===e.teacher)return!0;void 0!==t.parent&&(t=t.parent)}return!1}(l)){var f=b.situation(n,u,r,o);"shift"===f.action&&-1===f.r?0!==l.Pivots.length?S(l):i.push(O(l)):"cycle"===f.action&&-1===f.r?(l.callTo="pre",C.enqueue(l)):"cycle"===f.action&&-1!==f.r?s.enqueue(c({},l,{callTo:"pivotTo",pivotArgs:{next_m:f.r,AfterReChainNode:c({},l,{callTo:"pre",parent:void 0}),beforeReChainNode:e}})):"shift"===f.action&&-1!==f.r&&s.enqueue(c({},l,{callTo:"pivotTo",pivotArgs:{next_m:f.r,beforeReChainNode:e,AfterReChainNode:l}}))}}})}),C.length()-l<3)for(;s.notEmpty();)s.callFront(j,E,_),s.dequeue()}}function j(e){var t=e.Pos,r=e.m,n=e.Action,i=e.week,u=e.teacher,l=i.activateList,s=a(e.Pivots),f=b.situation(u,t,r,i),p=f.currTeacher;if(e.teacher!==p){var v=function(t){if("cycle"===n&&void 0===e.cycleClosingParentName)throw c({},e,{message:"re is a cycle and the vertix.cycleClosingParentName is undefined!"});return"cycle"===n&&e.cycleClosingParentName===t},d=new w,y=C.length(),m=s.length;if(!T(e))if(("shift"===n&&f.currTeacher===o||v(f.currTeacher))&&!T(e))0===e.Pivots.length?l.push(O(e)):S(e);else{if(p===o)return;i.availables[p].filter(function(t){for(var r=e;null!==r;){if(h(r.Pos,t))return!1;if(void 0===r.parent)throw c({},r,{message:"Parent is undefined!!"});r=r.parent}return!0}).forEach(function(t){var a=b.situation(p,t,r,i),u={teacher:p,Pos:t,m:r,Pivots:s,week:i,parent:e,callTo:"nothing",cycleClosingParentName:e.cycleClosingParentName,Action:n};("shift"===n&&a.currTeacher===o||v(a.currTeacher))&&-1===a.r&&!T(u)?0===u.Pivots.length?l.push(O(u)):S(u):a.r===r||(-1===a.r?C.enqueue(c({},u,{callTo:"re"})):d.enqueue(c({},u,{callTo:"pivotTo",pivotArgs:{next_m:a.r,beforeReChainNode:e,AfterReChainNode:c({},u,{callTo:"re",parent:void 0})}})))})}if(C.length()-y<3&&m<3)for(;d.notEmpty();)d.callFront(j,E,_),d.dequeue()}}var R=function(e,t,r,n){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5?arguments[5]:void 0,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];n.Swaping=!0,function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=b.situationInt,a=b.situation(e,t,r,n),u={teacher:e,Pos:t,m:r,week:n,parent:null,callTo:"nothing",Pivots:[]},l=i(a);switch(console.log(JSON.stringify(t)+" # "+n.allClasses[r].Name+" # "+e+" -> "+l),l){case 1:n.Swaping=!1,q(n,r,e,t,"put");break;case 2:C.enqueue(c({},u,{pivotArgs:{next_m:a.r,beforeReChainNode:u},callTo:"pivotTo"}));break;case 3:C.enqueue(c({},u,{callTo:"pre"}));break;case 4:C.enqueue(c({},u,{callTo:"pivotTo",pivotArgs:{next_m:a.r,AfterReChainNode:c({},u,{parent:void 0,callTo:"pre"}),beforeReChainNode:null}}));break;case 5:C.enqueue(c({},u,{callTo:"re",Action:a.action}));break;case 6:C.enqueue(c({},u,{callTo:"pivotTo",pivotArgs:{next_m:a.r,AfterReChainNode:c({},u,{callTo:"re",Action:a.action}),beforeReChainNode:null}}));break;case 7:C.enqueue(c({},u,{callTo:"re",Action:a.action,cycleClosingParentName:u.teacher}));break;case 8:C.enqueue(c({},u,{callTo:"pivotTo",pivotArgs:{next_m:a.r,AfterReChainNode:c({},u,{callTo:"re",parent:void 0,cycleClosingParentName:u.teacher,Action:a.action}),beforeReChainNode:null}}))}for(;C.notEmpty()&&!A(n,o);)C.callFront(j,E,_),C.dequeue();C.unlock(),C.eraseAll()}(t,r,e,n,a),o||N(e,n,i)({}),n.forceUpdate&&n.forceUpdate()},N=function(e,t,r){return function(e){var n=t.activateList[t.currentSolutionNumber];if(void 0===n)return t.Swaping=!1,t.activateList=[],t.currentSolutionNumber=0,void(t.forceUpdate&&t.forceUpdate());r&&r(n);for(var o=0;o<n.length;o++)q(t,n[o].m,n[o].teacher,n[o].Pos,"remove");for(var i=0;i<n.length;i++)q(t,n[i].m,n[i].teacher,n[i].Pos,"put");t.Swaping=!1,t.activateList=[],t.currentSolutionNumber=0,t.forceUpdate&&t.forceUpdate()}};function x(e,t){for(var r=e.allClasses,i=function(i){var a=r[i];d(function(r,u){if(a.l[r][u].currentTeacher===o&&0!==a.l[r][u].Options.length&&!a.l[r][u].isCemented){var c=function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unfiltered",i=n(e,2),a=i[0],u=i[1],c=r.allClasses[t].l[a][u].Options,l=c.filter(function(e){return-1===r.teacherSchedule[e][a][u]&&r.allClasses[t].teachers[e].remPeriods>0});if("filtered"===o&&0===l.length)return c;return l}([r,u],i,e);if(c.length>0){var l=c[Math.floor(Math.random()*c.length)];t&&t({Pos:[r,u],teacher:l,m:i}),q(e,i,l,[r,u],"put")}}})},a=r.length-1;a>=0;a--)i(a)}var q=function(e,t,r,i,a){var u="put"===a,c=e.allClasses,l=n(i,2),s=l[0],f=l[1],h=c[t].teachers;if(u)!function(e,t){return void 0===t[e]&&console.log("teachersList[".concat(e,"] = undefined"),t),t[e].remPeriods<1}(r,h)&&c[t].l[s][f].currentTeacher===o&&-1===e.teacherSchedule[r][s][f]?(c[t].l[s][f].currentTeacher=r,h[r].remPeriods--,h[r].periodsHere.push(i),Object.keys(h).forEach(function(e){var t=h[e];t.emptyAvailables=v(t.emptyAvailables,i)}),e.teacherSchedule[r][s][f]=t,void 0!==e.refreshTable&&e.refreshTable[t][s][f]()):console.warn("Illegal put ".concat(r," in ").concat(e.allClasses[t].Name," in [").concat(i[0],",").concat(i[1],"]"));else if(c[t].l[s][f].currentTeacher!==o){var d=c[t].l[s][f].currentTeacher;c[t].l[s][f].currentTeacher=o,h[d].remPeriods++,h[d].periodsHere=v(h[d].periodsHere,i),Object.keys(h).forEach(function(t){var r=h[t];p(e.availables[t],i)&&r.emptyAvailables.push(i)}),e.teacherSchedule[d][s][f]=-1,void 0!==e.refreshTable&&e.refreshTable[t][s][f]()}};t.default={};self.addEventListener("message",function(e){var t=function(e){return JSON.parse(e)}(e.data);x(t,function(e){self.postMessage({payload:e,type:"oneChange"})}),function(e,t){console.time("fast"),e.allClasses.forEach(function(r,i){var a=[];d(function(e,t){r.l[e][t].currentTeacher!==o||r.l[e][t].isCemented||a.push([e,t])}),a.forEach(function(a){for(var u=n(a,2),c=u[0],l=u[1],s=r.l[c][l].Options.sort(function(e,t){return.5-Math.random()}),f=0;r.l[c][l].currentTeacher===o&&f<s.length;){var h=r.l[c][l].Options[f];R(i,h,[c,l],e,!1,t,!0),f++}})}),console.timeEnd("fast")}(t,function(e){self.postMessage({payload:e,type:"multipleChanges"})}),console.log("posting Done"),self.postMessage({payload:t,type:"Done"})})}]);
//# sourceMappingURL=solve.worker.fd53a5b700a3f01679a9.js.map